jQuery(document).ready(function($){previous=(new $.Deferred).resolve();var previous,queue=function(fn,fail){return previous=previous.then(fn,fail||fn)};function tstatsPluginSubprojectsLoadAjax(tstatsPlugin,forceUpdate){forceUpdate&&($("tr[data-slug="+tstatsPlugin+"] td.translation-stats button.tstats-update-button").prop("disabled",!0).hide(),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").removeClass("notice-success updated-message notice-warning updating-message notice-error update-message"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").addClass("notice-warning update-message"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading p").html(wp.i18n.__("Waiting...","translation-stats")),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").fadeIn()),queue(function(){return $.ajax({url:tstats.ajaxurl,type:"POST",data:{action:"translation_stats_plugin_widget_content_load",tstatsPlugin:tstatsPlugin,forceUpdate:forceUpdate},beforeSend:function(){$("tr[data-slug="+tstatsPlugin+"] td.translation-stats").addClass("tstats-loading"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").removeClass("notice-success updated-message notice-warning updating-message notice-error update-message"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").addClass("notice-warning updating-message"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading p").html(wp.i18n.__("Updating...","translation-stats"))}}).done(function(html,textStatus,jqXHR){forceUpdate?($("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").removeClass("notice-success updated-message notice-warning updating-message notice-error update-message"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").addClass("notice-success updated-message"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading p").html(wp.i18n.__("Updated!","translation-stats"))):$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").hide(),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.content").html(html)}).fail(function(jqXHR,textStatus){$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").removeClass("notice-success updated-message notice-warning updating-message notice-error update-message"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading").addClass("notice-error update-message"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats div.translation-stats-content div.notice.translation-stats-loading p").html(wp.i18n.__("An error occurred while updating.","translation-stats"))}).always(function(){$("tr[data-slug="+tstatsPlugin+"] td.translation-stats").removeClass("tstats-loading"),$("tr[data-slug="+tstatsPlugin+"] td.translation-stats button.tstats-update-button").prop("disabled",!1).show()})})}$("table.wp-list-table td.translation-stats button.tstats-update-button").on("click",function(){tstatsPluginSubprojectsLoadAjax($(this).closest("tr").attr("data-slug"),!0)}),$("table.wp-list-table td.translation-stats div.translation-stats-loading").each(function(){tstatsPluginSubprojectsLoadAjax($(this).closest("tr").attr("data-slug"),!1)})});
jQuery(document).ready(function($){var tstatsSettingsURLHash=window.location.hash;function tstatsPluginsActivatePlugin(plugin){plugin=$('.tstats-plugin-list-table tr[data-plugin="'+plugin+'"]');$(plugin).addClass("active").removeClass("inactive").attr("data-subprojects","4"),$(plugin).find("input.checkbox-plugin").prop({checked:!0}),$(plugin).find("input.checkbox-plugin-subproject").prop({checked:!0})}function tstatsPluginsDeactivatePlugin(plugin){plugin=$('.tstats-plugin-list-table tr[data-plugin="'+plugin+'"]');$(plugin).addClass("inactive").removeClass("active").attr("data-subprojects","0"),$(plugin).find("input.checkbox-plugin").prop({checked:!1}),$(plugin).find("input.checkbox-plugin-subproject").prop({checked:!1})}function tstatsPluginsUpdateColumns(){$("#tstats-table-plugins thead th.column-subproject").each(function(){!function(subproject){var enabledPlugins=$("#tstats-table-plugins tbody tr:not(.disabled)").length,subprojectActivePlugins=$('input[data-subproject="'+subproject+'"].checkbox-plugin-subproject:checked').length;0<enabledPlugins&&(0<subprojectActivePlugins?($("input#subprojects_"+subproject).prop({checked:!0}),subprojectActivePlugins<enabledPlugins?$("input#subprojects_"+subproject).attr("data-indeterminate",!0):$("input#subprojects_"+subproject).attr("data-indeterminate",!1)):($("input#subprojects_"+subproject).prop({checked:!1}),$("input#subprojects_"+subproject).attr("data-indeterminate",!1)))}($(this).attr("data-subproject"))})}function tstatsPluginsUpdateRow(plugin){var row=$('.tstats-plugin-list-table tr[data-plugin="'+plugin+'"]'),plugin=$('input[data-plugin="'+plugin+'"].checkbox-plugin-subproject:checked').length;$(row).attr("data-subprojects",plugin),0<plugin?($(row).addClass("active").removeClass("inactive"),$(row).find("input.checkbox-plugin").prop({checked:!0})):($(row).addClass("inactive").removeClass("active"),$(row).find("input.checkbox-plugin").prop({checked:!1}))}function tstatsPluginsUpdateHeader(){var activeSubprojects,completelyActiveSubprojects;tstatsPluginsUpdateColumns(),activeSubprojects=$("#tstats-table-plugins thead input.checkbox-subproject:checked").length,completelyActiveSubprojects=$('#tstats-table-plugins thead input[data-indeterminate="false"].checkbox-subproject:checked').length,0<activeSubprojects?($("#tstats-table-plugins thead input#all_plugins").prop({checked:!0}),completelyActiveSubprojects<4?$("#tstats-table-plugins thead input#all_plugins").attr("data-indeterminate",!0):$("#tstats-table-plugins thead input#all_plugins").attr("data-indeterminate",!1)):($("#tstats-table-plugins thead input#all_plugins").prop({checked:!1}),$("#tstats-table-plugins thead input#all_plugins").attr("data-indeterminate",!1))}(tstatsSettingsURLHash=tstatsSettingsURLHash||"#plugins")&&($(".nav-tab-wrapper").children().removeClass("nav-tab-active"),$('.nav-tab-wrapper a[href="'+tstatsSettingsURLHash+'"]').addClass("nav-tab-active"),$(".tabs-content form").children(".tab-content").addClass("hidden"),$(".tabs-content form div"+tstatsSettingsURLHash.replace("#","#tab-")).removeClass("hidden")),$("#tstats-table-plugins").tablesorter({sortList:[[1,0]],sortRestart:!0,sortInitialOrder:"asc",widgets:["filter"],widgetOptions:{filter_external:"#plugins-search-input",filter_columnFilters:!1,filter_saveFilters:!1,filter_reset:"#plugins-search-reset"}}),$(".tstats-settings__content > .nav-tab-wrapper a").on("click",function(){var tstatsActiveTabContentID=$(this).attr("href").replace("#","#tab-");$(this).parent().children().removeClass("nav-tab-active"),$(this).addClass("nav-tab-active"),$(".tabs-content form").children(".tab-content").addClass("hidden"),$(".tabs-content form div"+tstatsActiveTabContentID).removeClass("hidden")}),$(".tstats-settings__content #all_plugins").on("click",function(){var activeSubprojects=$('#tstats-table-plugins thead input[data-indeterminate="false"].checkbox-subproject:checked').length;$("#tstats-table-plugins thead input#all_plugins").attr("data-indeterminate",!1),activeSubprojects<4?$(".tstats-plugin-list-table tr:not(.disabled)").each(function(){tstatsPluginsActivatePlugin($(this).attr("data-plugin"))}):$(".tstats-plugin-list-table tr:not(.disabled)").each(function(){tstatsPluginsDeactivatePlugin($(this).attr("data-plugin"))});tstatsPluginsUpdateHeader()}),$(".tstats-settings__content input.checkbox-plugin").on("click",function(){var plugin=$(event.target).attr("id").substring("plugins_".length);($('input[data-plugin="'+plugin+'"].checkbox-plugin-subproject:checked').length<4?tstatsPluginsActivatePlugin:tstatsPluginsDeactivatePlugin)(plugin);tstatsPluginsUpdateHeader()}),$(".tstats-settings__content input.checkbox-subproject").on("click",function(){var subproject=$(event.target).attr("id").substring("subprojects_".length),currentCount=$('input[data-subproject="'+subproject+'"]:checked').length,totalCount=$('input[data-subproject="'+subproject+'"]').length;0<totalCount&&currentCount<totalCount?$('input[data-subproject="'+subproject+'"]').prop("checked",!0):$('input[data-subproject="'+subproject+'"]').prop("checked",!1);$("#tstats-table-plugins tbody tr:not(.disabled)").each(function(){tstatsPluginsUpdateRow($(this).attr("data-plugin"))}),tstatsPluginsUpdateHeader()}),$(".tstats-settings__content input.checkbox-plugin-subproject").on("click",function(){tstatsPluginsUpdateRow($(event.target).parents("tr").attr("data-plugin")),tstatsPluginsUpdateHeader()}),$(".tablesorter-header:not(.sorter-false)").on("mouseup",function(){$(this).blur()})});